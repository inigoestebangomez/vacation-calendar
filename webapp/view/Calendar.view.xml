<mvc:View 
    xmlns:unified="sap.ui.unified"
    xmlns:dnd="sap.ui.core.dnd"
    xmlns:core="sap.ui.core" 
    controllerName="vacation.caledar.vacationcalendar.controller.Calendar"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:layout="sap.ui.layout"
    height="100%">
    <Page 
      id="page" 
      title="{i18n>title}">
    <headerContent>
      <Text 
        id="_IDGenText6" 
        text="{i18n>filterTitle}"/>
      <SearchField 
          id="globalSearch"
          placeholder="{i18n>searchPlaceholder}" 
          liveChange=".onGlobalSearch" 
          width="25vw"/>
    <layout:HorizontalLayout
        id="_IDGenHorizontalLayout"
        width="100%"
        class="sapUiContentPadding">
        <Text text="{i18n>departmentFilterTitle}"/>
        <MultiComboBox
          maxWidth="25vw"
          id="filterBy"
          selectionChange=".onFetchDepartments"
          items="{vacationModel>/department}">
          <core:Item 
            id="_IDGenItem" 
            key="{vacationModel>department}" 
            text="{vacationModel>department}"/>
        </MultiComboBox>
    </layout:HorizontalLayout>
      <Button
        id="adminButton"
        text="{i18n>adminButton}"
        icon="sap-icon://locked"
        press=".onPressButton"/>
    </headerContent>
    <content>
      <layout:Splitter 
        id="mySplitter" 
        width="100%" 
        height="100%"
        resize="true"
        orientation="Vertical">
          <Panel 
            id="sidePanel" 
            headerText="{i18n>reorderEmployees}" 
            expandable="true"
            expanded="false"
            expand=".onSidePanelToggle"
            expandAnimation="true" 
            visible="true">
            <layoutData>
              <layout:SplitterLayoutData id="_IDGenSplitterLayoutData" size="6%" />
            </layoutData>
            <List id="employeeList" items="{vacationModel>/rows}">
              <items>
                <StandardListItem 
                  id="_IDGenStandardListItem1" 
                  title="{vacationModel>title}"
                  description="{vacationModel>department}"
                  type="Active"/>
              </items>
              <dragDropConfig>
                <dnd:DragInfo 
                  id="_IDGenDragInfo" 
                  sourceAggregation="items" 
                  groupName="employeeGroup" />
                <dnd:DropInfo 
                  id="_IDGenDropInfo" 
                  targetAggregation="items" 
                  groupName="employeeGroup" 
                  dropPosition="On" 
                  drop=".onEmployeeDrop" />
              </dragDropConfig>
            </List>
          </Panel>
          <PlanningCalendar 
              id="_IDGenPlanningCalendar"
              viewKey="Month"
              appointmentsVisualization="Filled"
              appointmentSelect=".onAppointmentSelect"
              showWeekNumbers="true"
              showRowHeaders="true"
              stickyHeader="true"
              rows="{vacationModel>/rows}"
              rowSelectionChange=".onRowPress"
              height="auto">
            <rows>
              <PlanningCalendarRow 
                id="_IDGenPlanningCalendarRow"
                icon="{vacationModel>icon}" 
                title="{vacationModel>title}"
                text="{vacationModel>department}"
                appointments="{vacationModel>appointments}">
                  <appointments>
                    <unified:CalendarAppointment 
                      id="_IDGenCalendarAppointment" 
                      startDate="{ path: 'vacationModel>startDate', formatter: '.formatDate' }"
                      endDate="{ path: 'vacationModel>endDate', formatter: '.formatDate' }"
                      title="{vacationModel>title}"
                      text="{parts: 
                              [{ path: 'vacationModel>startDate' },
                              { path: 'vacationModel>endDate' }],
                              formatter: '.formatDateRange'}"
                      type="{vacationModel>type}"
                      tentative="{tentative}"/>
                  </appointments>
                      <customData>
                        <core:CustomData 
                          id="_IDGenCustomData" 
                          key="employeeId" 
                          value="{vacationModel>id}"/>
                  </customData>
              </PlanningCalendarRow>
            </rows>
          </PlanningCalendar>
      </layout:Splitter>
    </content>
    </Page>
</mvc:View>